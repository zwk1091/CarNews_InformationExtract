标题：自动驾驶语义高精地图的层级实现
内容：语义高精地图是高层级的高精地图，语义地图的实现需要以几何地图为基础。在这篇文章中，将要讲述自动驾驶语义高精地图的实现过程。正如人类驾驶员出行需要导航地图并观察周围环境来确定行驶路线一样，自动驾驶汽车上路时除了依靠自带的传感器探路避障，还需要一份地图来确定自己的位置，进行路线规划，这种供自动驾驶汽车使用的地图就是高精地图。自动驾驶车辆依靠自身配备的传感器探测车身周围环境信息，但超过车身一定距离后，例如车辆前方500米的道路环境，仅依靠车身传感装置很难得到信息反馈，而高精地图能够提供超视距信息，弥补传感器探测的不足。这些全面精确的信息能够为车辆增速还是减速、直行还是转弯等行为提供必要的决策依据。在真正上路行驶的过程中，随着更高级别自动驾驶的出现以及更高安全要求的提出，仅仅包含了几何位置信息的高精地图已经不能满足市场的需要，现在自动驾驶要做的不仅是对环境的物理性描绘，更要对环境进行理解，而对环境的理解分成两部分：最基础的是几何描绘，例如车辆前方是弯道、直道还是十字路口，距离车辆多远等空间信息。几何地图帮助车辆进行自身定位，并准确识别车辆自身处于地图中的何种位置。第二是语义理解，即通过几何描绘出的这个图形是信号灯还是路标等。语义地图帮助车辆保持在某一正常车道内运行，让自动驾驶车辆了解不同类型的道路之间、道路与路灯和行人之间是怎样的关系，并按照社会公序良俗和具体环境中他人的期望来选择如何作为。语义高精地图是高层级的高精地图，语义地图的实现需要以几何地图为基础，在这篇文章中，将要按顺序讲述自动驾驶语义高精地图的层级实现过程。道路网络图语义高精地图的最基础层是道路网络图。道路网络图能够表示存在多少车道、它们行驶的方向以及连接到哪条道路，还能显示人行道和车道之间的优先关系，这使得自动驾驶车辆能够安全地停在十字路口或人行横道上从而实现交叉通行。这些都是可以通过其他层进行变化的复杂属性：交通灯的变化影响车辆需要向哪些车道让路，或者依据时间段改变单双向车道。道路图层与车载导航地图相似，只不过功能更加丰富。自动驾驶汽车的规划功能使用道路网络图来确定从A到B的粗略路径，并通过避免复杂的交叉路口或限速道路来帮助自动驾驶车辆降低风险。车道几何层道路图层的基础上是精确到厘米级的车道几何图层。这一图层形状上是一组多边形，表示路面上的车道标记以及车辆将遵守的街道规则。这一图层显示的数据还包含在导航地图中通常没有的属性：线条颜色、允许换道区域、减速带和停止线等。了解这些属性能帮助车联对其他车辆或者行人做出明智的决定，使车辆能够安全地执行一些复杂的操作。虽然道路图层能够实现高水平的规划决策（例如规划从旧金山到西雅图的路线图），但车道几何图层能够帮助实现更具体和详细的路径规划：如何转动方向盘并使用踏板穿过这个十字路口？是否存在例如单行道类的环境限制？在车道几何图层的辅助下，当自动驾驶汽车真正行驶在路上时，可能会出现改变初始路线的实时决策。车辆的行为规划器使用虚线白色的车道分隔器来决定何时将控制命令发送到车辆的油门和转向控制，从而安全地改变车道或与车流合并。感知系统检测其他交通参与者并对其进行分类（例如，我旁边有一个大型物体，我认为它是卡车）。然后，车辆的智能预测功能使用地图位置、速度等信息来预测卡车在接下来的几毫秒和接下来的10-30秒内将做什么。有了人行道和人行横道的几何形状，自动驾驶车辆可以正确地识别行人，预测他们的行为。然后自动驾驶车辆会在人行横道前减速让行。以上这些系统在短时间内能够多次协同工作，以确保安全舒适的乘坐体验。语义特征和先验地图语义高精地图能把路上的语义元素抽取出来补充到前述的几何地图中，比如车道线、红绿灯、人行横道等，形成新的地图信息保存方式，然后用于车辆的定位和决策。在前两种几何类地图的基础上，第三代高精地图是语义特征和先验地图。语义特征包括交通灯、人行横道和路标等要素。先验地图是指地图中那些我们关心的可预测的概率性区域。这两方面的地图要素帮助车辆决定自己相对于其他物体的行为方式。在道路图层和车道几何图层中，语义关系定义了如何在复杂的车道关系中协同工作：可以转弯的地方、需要停车的地方，以及从A地到B地需要进入哪个车道行驶等。语义特征通过为自动驾驶汽车提供更多有关环境和周遭运动物体的相关信息，来获得更多的优先权。交通信号灯就是一个非常典型的例子。在普通地图中，它们是三维形状，表示交通信号灯的坐标位置，它们面向的方向或应用于哪些车道等。但是，交通信号灯不是静止的，普通地图所反映出来的特征并不能使自动驾驶车辆做出行驶决策。这时语义地图就能够发挥作用，能够辅助车辆的感知和规划系统判定交通信号灯的状态：是红灯还是绿灯？人行横道外是否还有行人在走动？这些是语义地图与其他地图相区别的特征，能够直接影响车辆的动态反应。先验地图与之类似，但包含更多的细微差别，能够显示普通地图数据的派生或或延伸信息。再以信号灯为例，先验层能够显示单个交通灯颜色循环变幻顺序（红色，绿色箭头，绿色，黄色，然后再红色……）、每个颜色的停留时间。但这样的规律循环状态是固定不变的吗？在高峰时段绿色是否会持续更长时间以允许更多的车辆通过主要交叉路口？从理论上讲，先验层可以显示那些我们所关心的特定类别物体或具有时空特异性的需要观察的信息。举例来说，在一些经常遛狗的公园区域，可以为自动驾驶汽车设置先验层，提示自动驾驶汽车在周六上午8点到11点之间注意动物。有了先验图层，自动驾驶汽车可以提供完全避开某个区域或在行驶到某个区域时更加谨慎。在高级别的先验图层中，自动驾驶汽车甚至可以洞察社会文化规范，这些信息不会显示在路标上，而是需要通过观察推断出来。例如，在中心转弯车道，由于相邻十字路口的限制，车辆倾向于转弯，此时自动驾驶车辆可以预先合并到其他车道上，从而避免事故的发生。区分语义特征和地图先验的最后一个例子是停车。停车点是一种语义特征，指示车辆不能行驶必须停止的区域。而先验地图会显示：停车区域可能可以安全驶过，也可能需要注意已经停靠在这一区域的汽车。语义地图和先验地图共同使自动驾驶车辆在导航复杂的道路系统上做出更细致的决定，表现得像一位经验丰富的驾驶员。语义地图构建语义地图的构建遵循一些基本原则：1．所有数据必须与车辆置身的几何图层信息一致。2．车辆自身获取的数据是最值得信赖的信源。3.充分利用已有的数据资源，例如导航地图，在其基础上构建语义地图。首先将现有的导航地图作为基础数据，在此基础上进行大量的工程设计用于保持信息的更新性和准确性，以上构成了道路图层的基础。利用自动驾驶探测车队和自身数据创建出用于本地化的道路图层、车道几何图层和大多数语义特征图层。接下来，通过自动驾驶传感器数据，利用计算机视觉和深度学习技术来识别车道标记、交通信号灯、路标和其他元素，对其位置进行三角测量，将它们的三维坐标放置在地图中。然后，通过分析车辆的行驶轨迹、观察其他车辆的行为，可以具体地做出诸如转弯限制，交通灯模式或驾驶员行为之类的提示。其中，自动驾驶传感器需要经过精心校准，并且要利用多种传感器例如GPS，IMU，激光雷达和相机等，通过激光雷达、视觉SLAM的方式处理道路信息，创建清晰的几何地图。激光雷达扫描处理产生一个模拟现实路面和周围区域特征的几何图，它能使我们精确地定位语义数据的位置。各种客观元素与地图数据之间的对应关系让我们将所有图层合并成为一个参照系，确保所有地图图层的一致性。车道几何图层上的人工控制地图构建的最后一步是持续的反馈循环，这种反馈用于人工管理和质量控制，以确保地图能够精确到厘米级。这其中算法发挥了很大的作用，除了辅助建图以外，还可以帮助我们巧妙地识别地图中的错误，以及提醒某些地方需要人工操作员进行最终的细化和质量控制。另外，丰富的2D和3D工具允许操作员标记数据源错误，在启发式算法或算法中调出逻辑错误，然后比对地图进行最终调整。一旦质量控制流程完成，就可以在车辆真正上路之前进行模拟情境自动化测试。通过模拟测试后，按照L5自动驾驶测试协议进行实时道路测试，严格遵守所有流程和规则。一旦最终的道路测试通过，该地图将被批准部署到车队中。后续在对车队数据进行处理时，所有收集的新信息将会进行自动的更新迭代，有助于不断改进和更新地图数据，并在此过程中重置算法。然后不断生成更加精准和确切的地图，并在实际道路行驶中检验它的可靠性。地图技术是自动驾驶车企能够正常运作的坚实基础，不仅对连接乘客和司机很重要，对行车安全问题和公司版图扩张也至关重要。自动驾驶技术更新迭代越来越快，智能驾驶传感器不断改进，性能越来越强，越来越多的城市开始部署自动驾驶研发测试，在此过程中，地图技术成为提高自动驾驶车辆行驶的效率、安全性和高速发展的关键。尤其在实现L5级自动驾驶时，高精地图的作用尤为重要，成为自动驾驶研发企业的必争高地。原文标题：自动驾驶语义高精地图的层级实现文章出处：【微信号：IV_Technology，微信公众号：智车科技】欢迎添加关注！文章转载请注明出处。
