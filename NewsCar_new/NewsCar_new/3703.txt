标题：基于车辆动力学辅助多轴IMU的自动驾驶汽车车身侧偏角和姿态角估计
内容：车身侧偏角和姿态角估计是自动驾驶技术关键组成部分。本文系统性提出了利用车辆动力学辅助多轴IMU(Inertialmeasurementunit)估计车身侧偏角和姿态角的方法。1.引言自动驾驶技术近年来被广泛关注。准确的车身侧偏角和姿态角估计是高级别的自动驾驶需要解决的诸多难题之一。例如，准确的车身姿态角有助于图像处理和特征匹配，同时也有助于车辆组合定位。从车辆侧向动力学控制角度来看，车身侧偏角通常作为控制变量也至关重要。然而，能够输出准确的车身侧偏角和姿态角的OxTSRT3000或者KistlerS-Motion等专业测试设备售价高昂，量产车上无法使用，更切实可行的办法是融合车载传感器信息对二者进行估计。数十年来，车身侧偏角和姿态角估计问题一直作为研究热点被大量学者关注。近年来，自动驾驶技术的发展为车身侧偏角和姿态角估计带来了新的研究契机，相比于传统汽车其包含了更加丰富的传感器：多轴IMU、摄像头、雷达以及GNSS(Globalnavigationsatellitesystem)等，这些信息可被用于估计车身侧偏角和姿态角。比如，车身三维速度和三维姿态角可直接从多轴IMU输出的三轴加速度和角速度直接积分得到，但长时间积分不可避免地会带来较大的累积误差[1]。所以多轴IMU一般会联合其他传感器信息同时使用，比如GNSS或者视觉[2][3]。然而，GNSS信号易受遮挡和城市峡谷的多路径效应影响；视觉信息质量依赖光照条件，且高动态条件下，摄像头也较难捕捉特征信息。而且GNSS和视觉通常以较低的频率输出且输出伴随有较大延迟，利用二者辅助多轴IMU估计车身侧偏角和姿态角时需要需要格外注意[4]。在某些低动态行驶条件下，车载底盘信号中的方向盘转角和轮速信息可结合车辆动力学模型一同使用来估计车身侧偏角和姿态角，这些信息可用于去除基于多轴IMU估计出的侧偏角和姿态角中的累积误差。然而在高动态工况下，车辆动力学模型面临严重的非线性和不确定性问题，单纯使用车辆动力学模型估计车身侧偏角和姿态角在此时可能会失效。基于此，在[6]的基础中，我们提出了基本观点：在低动态行驶条件下，基于车辆动力学模型的车身侧偏角和姿态角估计器可辅助基于多轴IMU的速度和姿态估计器，以去除后者中的积分误差。本文我们进一步考虑了多轴IMU安装位置与车身旋转中心的杆臂误差，提高了基于车辆动力学模型估计器的估计精度；进一步优化了车辆动力学辅助多轴IMU的辅助策略。具体有以下三点贡献：(1)提出了自主式车身侧偏角和姿态角估计器，相较于大多数文献只考虑车辆水平方向运动而言，本文考虑车身的全维平动和转动，同时对车身三维速度和姿态角进行估计，得益于估计了车身姿态角，加速度传感器中重力导致的加速度分量可被移除；(2)低动态行驶条件下，使用基于车辆动力学的车身侧偏角和姿态角估计器消除基于IMU的三维速度和三维姿态估计器的累积误差；由于没有了累积误差，在高动态工况下，去除累积误差且考虑姿态变化的基于IMU估计的侧偏角相较于基于车辆动力学估计的侧偏角精度更高；(3)提出了延迟估计器和预测器防止判断车辆动力学至极限工况延迟造成的基于车辆动力学估计器的误反馈。2.估计算法架构车辆是由多运动单元组成的整体，由于存在悬架等弹性单元，不同的行驶工况下车身会相对底盘发生多维转动。车身的俯仰角和侧倾角经常变化，而IMU通常安装于车身，对于加速度传感器，俯仰角和侧倾角的变化会导致重力在加速度测量中产生分量，需要对该分量进行补偿，否则，长时间积分会带来较大的速度误差。因此在估计车身速度和侧偏角时，需同时对车身姿态角进行估计，本文提出了图1所示的多源传感器融合架构。由于车身侧偏角在纵向速度已知的条件下可根据侧向速度计算得到，因此下文在描述时对侧偏角和侧向速度将不加区分。图1基于车辆动力学辅助IMU的姿态角与纵/侧向速度联合估计架构图1所示的估计器具有两个部分：姿态和速度延迟估计器和姿态和速度预测器。姿态和速度延迟估计器用于估计过去时刻(t-τ)的姿态和速度，输入至预测器中，并结合(t-τ)时刻至t时刻的加速度和角速度对当前时刻姿态和速度预测。对于延迟估计器(图1上半部分)，当车辆运行在低动态工况下(较小的纵/侧向加速度)时，基于车辆动力学模型估计所得的纵/侧向速度及其加速度精度较高，此时可将其作为测量反馈作用于基于多轴IMU的姿态和速度估计器，以消除基于多轴IMU的姿态和速度估计器的累积误差；当车辆运行在高动态工况下(大纵/侧向加速度)时，由于模型失配，基于车辆动力学模型估计所得的纵/侧向速度及其加速度精度较差，此时不再将其反馈至基于多轴IMU的姿态和速度估计器，基于多轴IMU的姿态和速度估计器运行于积分模式。由于在高动态工况下，通过车辆动力学辅助已将基于多轴IMU的姿态和速度估计器维持在较高精度状态，因此，当极限工况持续一段时间时，得益于考虑了车身姿态变化导致的加速度测量中重力分量，基于多轴IMU的姿态和速度估计器仍可维持较高估计精度。一般，车辆进入高动态工况后算法才可识别车辆已进入，该判断行为存在判断时间延迟，为了保证该段延迟时间内基于车辆动力学估计器的纵/侧向速度异常值不被反馈至基于多轴IMU的姿态和速度估计器中，将判断标志位延迟一段时间并与当前时间的判断标志位取或，与此同时将基于车辆动力学估计器和基于多轴IMU估计器估计结果均延迟τ时间，判断标志位便可以超前建立以切断基于多轴IMU估计器的测量反馈，实现了对基于车辆动力学估计器的纵/侧向速度异常值检测和隔离。对于预测器(图1下半部分)，在对(t-τ)时刻姿态/速度估计值的基础上，基于(t-τ)时刻至t时刻的加速度以及角速度通过姿态/速度预测器对当前时刻的姿态/速度进行预测。3.姿态角估计3.1基于多轴IMU的车身姿态角动态在车身姿态角估计时，为了有清晰的物理意义且利用通过车辆动力学估计所得姿态角对基于IMU的姿态解算进行辅助，采取车身坐标系相对于导航坐标系的一组欧拉角来表示车身姿态角，由导航坐标系至车身坐标系的旋转顺序为z-y-x，该组欧拉角动态见公式下标s表示传感器测量值，为三轴角速度传感器测得的绕x轴的侧倾角速度，为绕y轴的俯仰角速度，为绕z轴的横摆角速度，无下标s的表示相应真实欧拉角速度。3.2车身姿态角测量其中，g表示重力加速度，和为加速度传感器安装于旋转中心时的测量值，、和分别为车身坐标系下沿x轴、y轴和z轴的速度，上标点表示相应加速度；φ和θ分别表示侧倾角速度和俯仰角速度。在低动态工况下，公式(2)中右侧第1项可根据车辆纵向和侧向动力学设计估计器估计，然后移除第1项后得到第2项即可用于求解侧倾角和俯仰角。基于公式(1)和公式(2)即可通过拓展卡尔曼滤波算法对姿态角进行估计。4.车身速度估计4.1基于多轴IMU的速度动态当姿态角被估计后，基于公式(2)有，公式(3)即表示车身三维速度动态，当重力导致的加速度分量被移除后，剩余部分积分即为车身三维速度。4.2基于车辆动力学估计器的速度测量(1)纵向速度估计通过车辆纵向动力学可估计车身纵向速度，这里选取非驱动轮轮速信息加以处理以估计车辆纵向速度。在轮胎未打滑时，基于轮速对车辆的运动速度及其加速度估计。由于纵向速度由驾驶员通过油门和制动踏板控制，其动态不会太高。假设轮速的动态不超过三阶，然后在t时刻对由轮速计算的纵向速度多项式泰勒展开，有：其中表示由轮速换算的速度，和分别表示一阶、二阶和三阶导数，O表示高阶项，~表示各阶项的随机噪声。将的动态取到第三阶，忽略高阶动态。可通过轮速传感器测量。所以根据公式(4)即可对纵向速度及其加速度进行估计。(2)侧向速度估计图2单轨车辆动力学模型线性二自由度车辆模型如2所示，其中和分别为前后轴侧偏角，选取横摆角速度和质心侧偏角作为状态变量，基于该车辆侧向运动的动力学模型和测得的横摆角速度即可使用卡尔曼滤波一类算法设计估计器估计质心侧偏角及侧向速度。5.车身速度估计5.1反馈策略当车辆处于高动态行驶时，轮胎可能出现剧烈纵滑或者侧滑线性，此时由于车辆模型失配，基于车辆动力学估计的纵/侧向速度和姿态角误差较大，需要对二者进行隔离，不再用于修正基于IMU的速度和姿态角估计结果。本文使用纵向加速度、估计的滑移率、侧向加速度、方向盘转角和横摆角速度等指标设计判断逻辑识别该车辆状态，当这些信息本身或者短时间期望和方差超过设定阈值后，即认为车辆已进入高动态行驶工况，具体可参见原文。5.2延迟估计-预测器架构图3延迟补偿模块结构图前文已经提到过，5.1节中的对于车辆处于高动态的识别方法通常伴随有时间延迟，为了防止该延迟时间段内，基于车辆动力学估计出的误差较大的速度和姿态角污染基于IMU的速度和姿态角估计结果，基于公式(5)和公式(6)提出了延迟估计和预测估计的架构，如图3所示，通过第2部分和第3部分我们设计估计器对车辆(t-τ)时刻的速度和姿态角估计，得到状态，然后根据姿态角和速度动态模型f和输入u估计(t-τ)至t时刻的预测量δ，然后根据公式(6)即可恢复当前时刻的状态。6.实验验证6.1实验平台图4实验车辆图5传感器配置实验车由荣威E50改造而来，底盘的轮速和方向盘转角信号可通过整车CAN网络读取，KistlerS-Motion提供车身速度和姿态角参考值，ADIS16495提供车身运动的三轴加速度和角速度信息。6.2实验结果下面给出在高附着系数路面车辆双移线紧急避障工况下的实验结果，避障车速约为50~60km/h。图6位置轨迹图图7三轴加速度图8三轴角速度图9侧倾角图10俯仰角图11反馈标志位图12侧偏角图13侧偏角误差表1双移线工况侧倾角峰值点估计误差(°)/精度统计表2双移线工况侧偏角峰值点估计误差(°)/精度统计图6是行车轨迹，车身加速度和角速度如图7和图8所示，可以看到峰值侧向加速度超过8m/s2。图9和图10给出了车身侧倾角和俯仰角估计结果，估计误差小于0.2°(1)，并且预测器能够根据蓝色实线表示的延迟估计结果恢复处当前时刻状态，如红色虚线所示，侧倾角的峰值估计精度超过90%，见表1。图11所示的反馈标志位置1时，认为车辆在相应方向上处于高动态，可以看到当侧向加速度较大时，绿色虚线能够被及时置位，防止基于车辆动力学估计出的速度和姿态角被反馈至基于IMU的速度和姿态估计结果中。图12所示的车身侧偏角估计结果的估计误差基本处于0.3°以内，估计误差如图13所示，峰值估计精度见表2，效果优于基于车辆动力学的侧偏角估计结果。7.结论提出了基于车辆动力学和多轴IMU信息融合方法，对车身速度和车身姿态角进行估计，以估计车身侧偏角，在短时侧向高动态工况下车身侧偏角估计误差小于0.3°(1σ)，车身侧偏角估计精度大于90%。具体可得出以下三点结论：1)通过车辆动力学辅助基于多轴IMU的车身侧偏角和姿态角估计效果优于单纯基于车辆动力学估计出的侧偏角和姿态角；2)对车身速度和姿态角联合估计可将基于IMU的速度和姿态角估计器维持在较好的状态，即使短时间缺少反馈修正，基于IMU的速度和姿态角估计器进入开环积分模式，由于车身姿态变化导致的重力加速度已被从加速度传感器中去除，短时积分得到的车身速度精度仍然较高，侧偏角估计误差能够小于0.3°；3)延迟估计-预测器的结构能够有效避免基于车辆动力学估计出误差较大的结果的误反馈。THEEND
