标题：浅谈汽车电子电气域架构
内容：随着现代汽车的功能越来越复杂，整车上的电子控制单元（ElectronicControlUnits,ECUs）也随之增多。当前一辆普通汽车的ECU多达七八十个，代码约一亿行，其复杂度已经远远超过安卓手机系统。在传统的汽车供应链中，不同的ECU来自不同的供应商，有着不同的嵌入式软件和底层代码。这种分布式的架构在整车层面造成了相当大的冗余，传统汽车的软件更新几乎与汽车生命周期同步，极大地影响了用户体验。如何加快软件的创新与迭代？从传统的分布式架构，逐渐进化为集中式架构，“域”的概念由此而生。在行业的变迁和技术的发展潮流面前，永远都是适者生存，面对“域”的设计，国内外各大整车厂与供应商犹如八仙过海，各显神通。单一功能的控制器不再成为主流，整车更多关注的是系统方案和软件集成控制。只有掌握集大成于一体的“域”控制理念，才能在即将到来的市场机遇中真正做到屹立不倒，成为最强王者。电子电气架构的发展之路1.模块化和集成化架构方案在传统的整车电子电气架构体系中，通常将功能划分在不同的模块领域，如动力总成、信息娱乐、底盘、车身等，在每个模块领域中，控制器的设计通常基于特定的功能，如:座椅控制单元SCU、尾门控制器PLG等。模块与模块之间通过CAN总线传递信息，而其模块划分一般也根据总线数量而定，所以总线就是传统功能模块的领航员，这就是我们为什么会称呼某些特定总线为动力CAN，车身CAN等。这样的架构方案最大的特点是功能划分明确，模块与模块之间严格明确界限，一切“越界”行为容易控制，由于模块间的独立性较强，模块开发者不用太过于考虑其他模块的干扰问题。例如，动力总成不用担心会被车身CAN上的信号所干扰，并且也不用担心因为车身功能不稳定，而导致动力系统的功能受影响。然而这样的架构也存在着非常大的局限性，功能控制器的独立开发模式，就像封闭的部落式文化，虽然能够确保自身生态环境内的自给自足，但是由于信息的闭塞，传输信号的带宽局限，导致了资源无法共享，大量运算资源浪费，性能“偏科”现象严重。举个简单的例子，部落中有十个村庄，A村庄有着专业的铁匠，B、C等其他村庄没有铁匠，所以虽然A村庄的武装力量非常强大，但剩余9个村庄没有防卫能力。一旦发生战争，90%的村庄很快就会沦陷，即使A村庄可以独善其身，但整个部落却遭到了灭顶之灾。而这个例子中的“铁匠”就是车身中的诸多控制算法，例如EMS中的热管理算法、滤波算法，虽然能力非常强，但是其他控制器，例如车身的胎压控制、尾门控制、车窗防夹无法借用此算力，并且最多只能通过CAN信号得到一个数据量有限的结果。最后导致功能效果参差不齐，带来的用户体验也难以完美。这样的例子在低功能安全或L2以下的自动驾驶运用中，可能还可以被接受，然而一旦涉及L4级别或ASIL-D级以上的功能安全，那么，模块化封闭的架构设计的缺陷就会被放大，成为功能正向开发最大的障碍。而集成化方案仅仅是模块化方案的一个小规模升级，在架构上减少了功能单一和冗余的模块，将复数功能小范围地融合在一个控制器中，例如BCM集成PEPS，ESP集成TPMS等等。其带来最大的利益在于成本，却无法依然弥补跨模块之间通讯率低下的缺陷。2.中央集中式架构方案中央集中式架构方案中，第一次出现了“域”Domain的概念。“域”这张牌和“模块集成”最大的区别在于，模块集成是将传统的模块集中“打包”，其本质依然是原有的功能划分，模块与模块之间的壁垒仍然没有被打破，而且有很强的硬件捆绑特性。例如，市面上有很多BCM集成了PEPS功能，但假设需要将PEPS系统集成到ESP控制器，那么原有平台将无法兼容，需要花费较大工作量来开发新平台。而“域”的概念的核心思想在于灵活，系统与软件层面的集成，脱离了硬件捆绑的限制。我们继续从刚才村庄铁匠的例子说起，“域”在刚才的例子中是如何体现的呢？首先，铁匠还是住在A村庄，他的“工匠手艺”依然是核心机密，B村庄、C村庄依然无缘一睹精良的武器是如何生产的。但是，由于通信的壁垒被具有超大带宽的“以太网”所打破，B和C虽然没有铁匠，但是由于他们村通网了！并且和A村庄在一个“局域网”信号范围内，他们可以通过打电话、发信息或网上订购的方式，向A村庄下订单。而对于A村庄而言，由于消费者和订单量的增加，铁匠的社会地位迅速提升，一下子成为了村里的大地主，他也会有更多的动力来研究高效率打铁。这个升级版的例子里面的几个关键字，“ABC村庄”对应ECU控制器，而“村庄间的局域网”对应车载以太网、FlexRay或CAN-FD，“网络订单”则对应灵活的互联网协议（可能聪明的你已经发现了，TCP/IP、SOME-IP协议中的消费者和提供方就是这个概念）。而例子中的灵魂人物铁匠，则是我们熟悉的域控制器DomainController，他是大而全的功能提供方，具备独家绝学的核心算法，如果说“互联网关”是域架构中负责协调调度的“村长”，那么“域控制器”就是给村民带来福利的乡绅。在大部分域架构设计中，域控制器可以集成给其他小控制器、小执行器提供什么样的算法、功能，决定了域的范围有多大。举个实际点的例子，“车身域控制器BDU”，是集成了所有车身电子的基础驱动、钥匙功能、灯、门、车窗等等的大控制器。由于车身域控制器可以提供“车身打铁”技术，例如车窗防夹算法、电压补偿、备份驱动等功能。所以，小型的控制器可以不再关注复杂算法，而是更多地关注硬件和驱动。不但冗余软件的开发量可以大幅度缩减，并且非常多的控制器可以被精简优化，例如传统的电动尾门控制器、车窗防夹控制器、门控制器等等。小村民不再考虑如何造武器，更多地开始考虑如何修炼武功。这样一个干练的精兵团体，组成了数量少、成本低却又具有着强大功能的车身域。这样一个标准化的共享软件资源的架构设计理念，不但在车身，而是在整车各个领域都得到了充分的运用，成为了我们耳熟能详的动力域、底盘域、车身域、信息娱乐域和ADAS域等等。这就是基于不同“域Domain”的集中式电子电气架构。3.Zone区域架构方案如上文提及，“域”的概念其实对于许多OEM和Tier1并不陌生，你可能也已经想到，在互联网、航天、船舶等领域，域早已不是一个新鲜词，既然集中式方案的域架构理念如此完美，那么“域Domain”为什么近几年来在中低端车型上没有得到大范围的运用呢？这个问题的答案其实很简单，关键字就在于“成本”。前沿的设计理念带来了现实的矛盾。随着近年来汽车电子爆发，ECU数量，ECU的运算能力需求都呈现爆发式增长，在ADAS时代和即将到来的自动驾驶时代更加明显，同时对运算带宽的需求也开始爆发。这造成汽车电子系统成本大增，除了ECU系统数量的增加之外，为了配合基于模块划分的“功能域”的概念，线束、布置、安装、支架，不得不重新洗牌设计，并且带来非常惊人的机械结构的成本。继续拿“车身域”举例，为了建成这个以功能为导向的电子电气架构，OEM不得不将后刹车灯、后位置灯、尾门锁、甚至双撑杆的连接线束拉长，跨过80%的白车身，连接到置于车身前方的域控制器中。电子架构是舒服了，机械布置的同事们却崩溃了。同样的例子，在ADAS的前后雷达、空调系统的前后制冷、底盘系统的前后轮转向控制均有类似的问题。一辆低端车的线束系统成本只要大约300美元，重量大约30公斤，长度大约1500米，线束大约600根，1200个接点；而目前一辆豪华车的线束系统成本大约550-650美元，重量大约60公斤，线束大约1500根，长度大约5000米，3000个接点。如果沿用目前的电子架构体系，自动驾驶时代的线束成本将不会低于1000美元，重量可高达100公斤。这些令人诧异的数字，成为了大多数车型望“域”止步的原因。言归正传，为了解决高昂的成本，且不丢失“域”的软件集中的核心概念。电动车的领跑者TESLA特斯拉在Model3上重新划分了“域”。在新的概念中，不再存在传统的车身域、动力域等，取而代之的是物理空间上的划分“区域Zone”，比如中域、左域和右域。你可能会说，新的域按照布置方案来划分，这一刀是不是切得有点太“土”了？然而这却是区域的核心理念。汽车电子在经历了这么多的变迁后，终于开始走向一条由繁至简的路。而新的域，也就是今天提到的，未来可能会实现的基于位置分布的“域Zone”，通过不同域之间的交互融合，用接近原则这一简单的招式，完美规避了上述问题，但是却也给软件开发带来了史诗级的挑战。例如，车身控制器工程师可能需要开始研习雷达的驱动和算法；功能安全ASIL-C和D级别的软件开发逐渐变成标配。域的控制开发要求将不再仅限于功能，软硬件开发将打破传统的功能划分壁垒，更多地需要从整车角度思考去设计。总结基于“域Zone”的电子电气架构，看似简单，实则包含了非常多的架构学问在其中。它打破的，不仅仅是功能与功能之间的隔阂，更打破了整车架构的思维壁垒。更重要的是，特斯拉已经用他们在Model3上的答卷证明了，Zone并不是不可实现的，超前的架构和低廉的成本是可以同时具备的。那么，域究竟是终点，还是新时代的起点？整车电子电气架构有没有更好的解决方案？在此背景下，联合电子在已有的开发平台基础上，制定了新一代车身域控制器的开发目标，积极采纳和引入高新技术，不断开发和拓展。新一代域控制器除了继承传统控制器的功能以外，将支持更多集成式的特殊功能，实现以太网和云端信息互联，打造更可靠的质量平台。联合电子作为国内汽车电子控制器的领军者，与整车厂密切合作，以车身域控制器等新型产品为弹药，打响跨时代开发的第一枪。原文标题：抛砖引“域”——浅谈汽车电子电气域架构文章出处：【微信号：IV_Technology，微信公众号：智车科技】欢迎添加关注！文章转载请注明出处。
